webpackJsonp([30],{"1I2r":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("BO1k"),i=e.n(s),r=e("P9l9"),o={data:function(){return{img:"",form:{houseLeaseId:"",imageIds:""},modal:!1,isEmpty:!0,param:{houseLeaseId:""},imageList:[]}},methods:{handleRemoveImage:function(t){var a=this,e=this;e.$Modal.confirm({title:"确认删除该图片?",onOk:function(){var s={id:t};Object(r.V)(s).then(function(t){1e3===t.data.code?(e.$Message.success("删除成功！"),e.getImage(a.param.houseLeaseId)):e.$Message.error(t.data.message)})}})},add:function(){this.img="",this.form.imageIds="",this.modal=!0},handleUpload:function(t){var a=this,e=new FormData,s=!0,o=!1,n=void 0;try{for(var l,d=i()(t.target.files);!(s=(l=d.next()).done);s=!0){var m=l.value;e.append("file",m)}}catch(t){o=!0,n=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw n}}Object(r._9)(e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1e3===t.data.code?(a.img=t.data.content.url,a.form.imageIds=t.data.content.id):a.$Message.error(t.data.message),a.$refs.upload.value=""})},homeImageAdd:function(){var t=this;""!==this.form.imageIds?Object(r.U)(this.form).then(function(a){1e3===a.data.code?(t.getImage(t.param.houseLeaseId),t.modal=!1):t.$Message.error(a.data.message)}):this.$Message.error("图片不可以为空")},back:function(){this.$router.push({name:"house_lease",params:{id:this.$route.params.id,param:this.$route.params.param}})},getImage:function(t){var a=this,e={houseLeaseId:t};Object(r.W)(e).then(function(t){if(1e3===t.data.code){var e=t.data.content;a.imageList=e}})}},created:function(){void 0!==this.$route.params.leaseId&&(this.form.houseLeaseId=this.$route.params.leaseId,this.param.houseLeaseId=this.$route.params.leaseId,this.getImage(this.$route.params.leaseId))}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[e("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:t.back}}),t._v(" "),e("div",{staticStyle:{margin:"10px 30px"}},[e("span",[t._v("\n       房屋管理\n       "),e("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),e("span",[t._v("\n       租赁管理\n       "),e("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),e("span",[t._v("租赁图片")])])],1),t._v(" "),e("div",{staticClass:"detailBody"},[e("div",[e("Row",[e("Button",{staticClass:"btn-save",staticStyle:{float:"right","margin-right":"20px"},on:{click:t.add}},[t._v("创建图片")])],1),t._v(" "),e("div",{staticClass:"content"},[t.imageList.length<1?e("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e(),t._v(" "),t.imageList.length>0?e("Row",{attrs:{gutter:16}},t._l(t.imageList,function(a,s){return e("Col",{key:s,attrs:{span:"6"}},[e("div",{staticClass:"imageItem",staticStyle:{"margin-bottom":"20px"}},[e("a",{attrs:{href:a.url,target:"_blank"}},[e("img",{staticStyle:{width:"100%",height:"220px"},attrs:{src:a.url,alt:""}})]),t._v(" "),e("div",{staticClass:"mask-image"},[e("Icon",{attrs:{type:"ios-trash-outline",size:"24",color:"#fff"},nativeOn:{click:function(e){return t.handleRemoveImage(a.id)}}})],1)])])}),1):t._e()],1)],1),t._v(" "),e("Modal",{model:{value:t.modal,callback:function(a){t.modal=a},expression:"modal"}},[e("p",{attrs:{slot:"header"},slot:"header"},[t._v("创建图片\n      ")]),t._v(" "),e("div",{staticClass:"formContent"},[e("Form",{ref:"formItem",attrs:{model:t.form,"label-width":150}},[e("FormItem",{staticClass:"selfValidate",attrs:{label:"图片"}},[e("div",{staticClass:"file"},[e("input",{ref:"upload",staticStyle:{height:"30px"},attrs:{type:"file"},on:{change:t.handleUpload}}),t._v("上传图片\n            ")]),t._v(" "),e("Row",{directives:[{name:"show",rawName:"v-show",value:""!==t.img,expression:"img !== ''"}]},[e("Col",{attrs:{span:"4"}},[e("a",{attrs:{href:t.img,target:"_blank"}},[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.img,alt:"暂未传照片"}})])])],1)],1)],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:t.homeImageAdd}},[t._v("创建图片")])],1)])],1)],1)},staticRenderFns:[]};var l=e("VU/8")(o,n,!1,function(t){e("wTVf")},"data-v-325950df",null);a.default=l.exports},wTVf:function(t,a){}});
//# sourceMappingURL=30.72ef8b32f30c9e8220f7.js.map