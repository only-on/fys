webpackJsonp([28],{geKD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("pPmT"),o=a("P9l9"),r={data:function(){var e=this;return{roomsList:[],size:[10,20,30,40,50],total:0,page:1,rows:10,columns:[{title:"序号",width:100,align:"center",render:function(e,t){return e("div",t.index+1)}},{title:"租客姓名",key:"tenantName",align:"center"},{title:"租赁房间",key:"roomName",align:"center"},{title:"租赁状态",key:"type",align:"center",render:function(e,t){return e("div","1"===t.row.state||1===t.row.state?"生效中":"2"===t.row.state||2===t.row.state?"人工终止":"3"===t.row.state||3===t.row.state?"合同到期":"-")}},{title:"联系方式",key:"tenantPhone",align:"center"},{title:"操作",key:"action",align:"center",width:200,render:function(t,a){return t("div",[t("Icon",{props:{type:"ios-image-outline",size:28},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px",display:"1"===a.row.state||1===a.row.state?"inline":"none"},on:{click:function(){e.$router.push({name:"house_lease_images",params:{id:e.$route.params.id,param:e.$route.params.param,leaseId:a.row.id}})}}}),t("Icon",{props:{type:"ios-create-outline",size:28},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px",display:"1"===a.row.state||1===a.row.state?"inline":"none"},on:{click:function(){e.$router.push({name:"house_lease_create",params:{id:e.$route.params.id,param:e.$route.params.param,leaseId:a.row.id}})}}}),t("Icon",{props:{type:"ios-list-box-outline",size:24},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.$router.push({name:"house_lease_detail",params:{id:e.$route.params.id,param:e.$route.params.param,leaseId:a.row.id}})}}}),t("Icon",{props:{type:"ios-close-circle-outline",size:24},style:{color:"#516BEB",cursor:"pointer",display:"1"===a.row.state||1===a.row.state?"inline":"none"},on:{click:function(){e.handleRemoveHouse(a.row.id)}}})])}}],dataTable:[{id:1}],isEmpty:!0,param:{pageNum:1,pageSize:10,state:"",houseId:"",keyWord:""},typeList:[{id:1,name:"生效中"},{id:2,name:"人工终止"},{id:3,name:"合同到期"}]}},methods:{handleRemoveHouse:function(e){var t=this,a=this;a.$Modal.confirm({title:"确认终止该租赁?",onOk:function(){var s={id:e};Object(o.Z)(s).then(function(e){1e3===e.data.code?(a.$Message.success("终止成功！"),a.getHouse(t.param)):a.$Message.error(e.data.message)})}})},add:function(){this.$router.push({name:"house_lease_create",params:{id:this.$route.params.id,param:this.$route.params.param}})},back:function(){this.$router.push({name:"house",params:{param:this.$route.params.param}})},changeSelect:function(){this.page=1,this.param.pageNum=1,this.getHouse(this.param)},keywordChange:Object(s.a)(function(){this.page=1,this.param.pageNum=1,this.getHouse(this.param)}),backKeyword:function(){this.param.keyWord="",this.page=1,this.param.pageNum=1,this.getHouse(this.param)},change:function(e){this.page=e,this.param.pageNum=this.page,this.getHouse(this.param)},doPageSizeChange:function(e){this.rows=e,this.param.pageSize=this.rows,this.getHouse(this.param)},getHouse:function(e){var t=this;Object(o.X)(e).then(function(e){1e3===e.data.code?(t.dataTable=e.data.content.list,t.total=e.data.content.total,t.rows=e.data.content.pageSize,t.page=e.data.content.pageNum):(t.dataTable=[],t.total=0,t.rows=10,t.page=1),void 0!==t.$refs.tablePage&&(t.$refs.tablePage.currentPage=t.page)})}},created:function(){void 0!==this.$route.params.id&&(this.param.houseId=this.$route.params.id),this.getHouse(this.param);var e=this,t={houseId:this.$route.params.id};Object(o._6)(t).then(function(t){1e3===t.data.code?e.roomsList=t.data.content:e.roomsList=[]})}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[a("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:e.back}}),e._v(" "),a("div",{staticStyle:{margin:"10px 30px"}},[a("span",[e._v("\n       房屋管理\n       "),a("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),e._v(" "),a("span",[e._v("租赁管理")])])],1),e._v(" "),a("div",{staticClass:"detailBody"},[a("div",{staticClass:"detailContentImage"},[a("Row",{staticStyle:{margin:"0 0 20px 20px"}},[a("Input",{staticClass:"head-search",staticStyle:{width:"250px",float:"left","margin-right":"20px"},attrs:{placeholder:"租客姓名",icon:"ios-close-circle"},on:{"on-change":e.keywordChange,"on-click":e.backKeyword},model:{value:e.param.keyWord,callback:function(t){e.$set(e.param,"keyWord","string"==typeof t?t.trim():t)},expression:"param.keyWord"}}),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"150px",float:"left","margin-right":"20px","text-align":"left"},attrs:{placeholder:"租赁状态",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.param.state,callback:function(t){e.$set(e.param,"state",t)},expression:"param.state"}},e._l(e.typeList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"150px",float:"left","margin-right":"20px","text-align":"left"},attrs:{placeholder:"租赁房间",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.param.roomId,callback:function(t){e.$set(e.param,"roomId",t)},expression:"param.roomId"}},e._l(e.roomsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.roomName))])}),1),e._v(" "),a("Button",{staticClass:"btn-save",staticStyle:{float:"right","margin-right":"20px"},on:{click:e.add}},[e._v("创建租赁")])],1),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns,data:e.dataTable}}),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("Page",{ref:"tablePage",attrs:{total:e.total,"page-size":e.rows,"show-sizer":"","show-total":"","page-size-opts":e.size,"show-elevator":"",transfer:!0},on:{"on-page-size-change":e.doPageSizeChange,"on-change":e.change}})],1)],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(e){a("mYA7")},"data-v-35207912",null);t.default=n.exports},mYA7:function(e,t){}});
//# sourceMappingURL=28.a6e8b09f4ad2f75dd820.js.map