webpackJsonp([19],{e9tr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("P9l9"),s={data:function(){return{showTip:!1,dateRange:[],roomList:[],idCardNotice:!1,mobilePhoneNotice:!1,detailAddress:"",typeList:[],formItem:{roomId:"",tenantName:"",tenantPhone:"",tenantIdCard:"",houseId:"",startTime:"",contractDeadline:""}}},methods:{dateRangeChange:function(t){""!==t[0]&&void 0!==t[1]?(this.formItem.startTime=t[0],this.formItem.contractDeadline=t[1]):(this.formItem.startTime="",this.formItem.contractDeadline="")},mobilePhoneVal:function(t){this.formItem.tenantPhone=t.trim();""!==this.formItem.tenantPhone?/(^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$)/.test(t.trim())?this.mobilePhoneNotice=!1:this.mobilePhoneNotice=!0:this.mobilePhoneNotice=!1},idCardVal:function(t){this.formItem.tenantIdCard=t.trim();""!==this.formItem.tenantIdCard?/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t.trim())?this.idCardNotice=!1:this.idCardNotice=!0:this.idCardNotice=!1},leaseChange:function(){"0"===this.formItem.lease?this.formItem.useState="3":this.formItem.useState="0"},submitVal:function(t){return 0===t.tenantName.toString().trim().length?(this.$Message.error("租客姓名不能为空！"),!1):""===t.startTime||null===t.startTime?(this.$Message.error("租赁时间不能为空！"),!1):!0===this.mobilePhoneNotice?(this.$Message.error("联系方式格式不正确！"),!1):!0!==this.idCardNotice||(this.$Message.error("身份证格式不合法！"),!1)},save:function(){var t=this;t.submitVal(t.formItem)&&(""===t.formItem.id||void 0===t.formItem.id?Object(o.S)(t.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("租赁创建成功！"),t.back()):t.$Message.error(e.data.message)}):Object(o._0)(t.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("租赁编辑成功！"),t.back()):t.$Message.error(e.data.message)}))},getDetail:function(t){var e=this,a={houseLeaseId:t};Object(o.T)(a).then(function(t){if(1e3===t.data.code){var a=t.data.content;e.formItem={id:a.id,tenantName:a.tenantName,tenantIdCard:a.tenantIdCard,tenantPhone:a.tenantPhone,houseId:a.houseId,roomId:a.roomId,startTime:a.startTime.split(" ")[0],contractDeadline:a.contractDeadline.split(" ")[0]},e.dateRange=[a.startTime.split(" ")[0],a.contractDeadline.split(" ")[0]]}else e.formItem={id:"",tenantName:"",roomId:"",tenantIdCard:"",tenantPhone:"",houseId:e.$route.params.id,startTime:"",contractDeadline:""}})},back:function(){this.$router.push({name:"house_lease",params:{id:this.$route.params.id,param:this.$route.params.param}})}},mounted:function(){},created:function(){var t=this;if(this.formItem.houseId=this.$route.params.id,void 0!==this.$route.params.leaseId)this.formItem.id=this.$route.params.leaseId,this.getDetail(this.formItem.id),this.showTip=!1;else{var e={houseId:this.$route.params.id};Object(o.Y)(e).then(function(e){if(1e3===e.data.code)if(t.roomList=e.data.content,t.roomList.length>0){t.roomList.push({id:0,roomName:"整租"})}else t.showTip=!0;else t.showTip=!0})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[a("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:t.back}}),t._v(" "),a("div",{staticStyle:{margin:"10px 30px"}},[a("span",[t._v("\n       房屋管理\n       "),a("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),a("span",[t._v("\n       租赁管理\n       "),a("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),a("span",[t._v(t._s(""===t.formItem.id||void 0===t.formItem.id?"创建":"编辑")+"租赁")])])],1),t._v(" "),a("div",{staticClass:"detailBody"},[a("div",{staticClass:"detailContent"},[a("Row",{staticClass:"detailTitle",attrs:{type:"flex",justify:"start"}},[t._v("租赁信息")]),t._v(" "),a("div",{staticClass:"formContent"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip,expression:"showTip"}],staticStyle:{"font-size":"20px"}},[t._v("暂无可租赁房间")]),t._v(" "),a("Form",{directives:[{name:"show",rawName:"v-show",value:!t.showTip,expression:"!showTip"}],ref:"formItem",attrs:{model:t.formItem,"label-width":150}},[a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"租客姓名"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入租客姓名"},model:{value:t.formItem.tenantName,callback:function(e){t.$set(t.formItem,"tenantName","string"==typeof e?e.trim():e)},expression:"formItem.tenantName"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:""===t.formItem.id||void 0===t.formItem.id,expression:"formItem.id === '' || formItem.id === undefined"}],staticClass:"selfValidate",attrs:{label:"租赁房间"}},[a("Select",{staticStyle:{width:"300px","text-align":"left"},attrs:{placeholder:"租赁房间"},model:{value:t.formItem.roomId,callback:function(e){t.$set(t.formItem,"roomId",e)},expression:"formItem.roomId"}},t._l(t.roomList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.roomName))])}),1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"租赁时间"}},[a("DatePicker",{staticStyle:{width:"300px","border-radius":"0px !important"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择租赁时间",editable:!1},on:{"on-change":t.dateRangeChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"联系方式"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入联系方式"},on:{"on-change":function(e){return t.mobilePhoneVal(t.formItem.tenantPhone)}},model:{value:t.formItem.tenantPhone,callback:function(e){t.$set(t.formItem,"tenantPhone",e)},expression:"formItem.tenantPhone"}}),t._v(" "),t.mobilePhoneNotice?a("span",{staticClass:"notice"},[t._v("请输入合法的手机号码")]):t._e()],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"身份证号"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入身份证号"},on:{"on-change":function(e){return t.idCardVal(t.formItem.tenantIdCard)}},model:{value:t.formItem.tenantIdCard,callback:function(e){t.$set(t.formItem,"tenantIdCard",e)},expression:"formItem.tenantIdCard"}}),t._v(" "),t.idCardNotice?a("span",{staticClass:"notice"},[t._v("请输入合法的二代身份证号码")]):t._e()],1)],1)],1)],1)],1),t._v(" "),a("Row",{directives:[{name:"show",rawName:"v-show",value:!t.showTip,expression:"!showTip"}],staticStyle:{"margin-top":"30px"},attrs:{type:"flex"}},[a("Button",{staticClass:"btn-save",staticStyle:{padding:"5px 30px"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("uZ7s")},"data-v-6c494d14",null);e.default=n.exports},uZ7s:function(t,e){}});
//# sourceMappingURL=19.889321caf714d6157c63.js.map