webpackJsonp([27],{"3WwB":function(e,t){},tuWm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("pPmT"),n=a("P9l9"),i={data:function(){var e=this;return{isManager:!0,size:[10,50,100,200],total:0,rows:10,page:1,paramnter:{pageNum:1,pageSize:10,keyword:"",type:""},roleList:[{value:2,label:"超级管理员"},{value:3,label:"运维管理员"},{value:4,label:"普通用户"}],columns:[{title:"序号",width:100,align:"center",render:function(t,a){return t("div",e.paramnter.pageNum>1?(e.page-1)*e.rows+a.index+1:a.index+1)}},{title:"真实姓名",key:"realName",align:"center"},{title:"手机号码",key:"phone",align:"center"},{title:"角色",key:"type",align:"center",render:function(t,a){for(var r=0;r<e.roleList.length;r++)if(a.row.type===e.roleList[r].value)return t("div",e.roleList[r].label)}},{title:"注册时间",key:"createTime",align:"center"},{title:"操作",align:"center",width:260,render:function(t,a){return t("div",[t("Icon",{props:{type:"ios-create-outline",size:28},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.edit(a.row)}}}),t("Icon",{props:{type:"ios-list-box-outline",size:24},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.$router.push({name:"user_detail",params:{row:a.row,param:e.paramnter}})}}}),t("Icon",{props:{type:"ios-trash-outline",size:24},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.delItem(a.row.id)}}})])}}],dataTable:[]}},methods:{add:function(){this.$router.push({name:"user_create"})},edit:function(e){this.$router.push({name:"user_create",params:{row:e,param:this.paramnter}})},delItem:function(e){var t=this;t.$Modal.confirm({title:"确认删除该用户?",onOk:function(){var a={userId:e};Object(n._12)(a).then(function(e){1e3===e.data.code?(t.$Message.success("删除成功！"),t.getTableDatas(t.paramnter)):t.$Message.error(e.data.message)})}})},keywordChange:Object(r.a)(function(){this.paramnter.keyword=this.paramnter.keyword.trim(),this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)}),backKeyword:function(){this.paramnter.keyword="",this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},changeSelect:function(){this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},change:function(e){this.page=e,this.paramnter.pageNum=this.page,this.getTableDatas(this.paramnter)},doPageSizeChange:function(e){this.rows=e,this.paramnter.pageSize=this.rows,this.getTableDatas(this.paramnter)},getTableDatas:function(e){var t=this;Object(n._13)(e).then(function(e){1e3===e.data.code?(t.dataTable=e.data.content.list,t.total=e.data.content.total,t.rows=e.data.content.pageSize,t.page=e.data.content.pageNum):(t.dataTable=[],t.total=0,t.rows=10,t.page=1),void 0!==t.$refs.tablePage&&(t.$refs.tablePage.currentPage=t.page)})}},created:function(){this.isManager="4"!==sessionStorage.getItem("roleType"),this.isManager||this.columns.splice(this.columns.length-1,1),this.getTableDatas(this.paramnter)}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"content"},[a("Row",{staticStyle:{"margin-bottom":"20px"}},[a("Input",{staticClass:"head-search",staticStyle:{width:"250px",float:"left","margin-right":"20px"},attrs:{placeholder:"姓名、手机号码",icon:"ios-close-circle"},on:{"on-change":e.keywordChange,"on-click":e.backKeyword},model:{value:e.paramnter.keyword,callback:function(t){e.$set(e.paramnter,"keyword",t)},expression:"paramnter.keyword"}}),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"角色",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.paramnter.type,callback:function(t){e.$set(e.paramnter,"type",t)},expression:"paramnter.type"}},e._l(e.roleList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),e.isManager?a("Button",{staticClass:"btn-save",staticStyle:{float:"right"},on:{click:e.add}},[e._v("创建用户")]):e._e()],1),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns,data:e.dataTable}}),e._v(" "),a("div",{staticClass:"pages-block"},[a("div",{staticClass:"pages-right"},[a("Page",{ref:"tablePage",attrs:{total:e.total,"page-size":e.rows,"show-sizer":"","show-total":"","page-size-opts":e.size,"show-elevator":"",transfer:!0},on:{"on-page-size-change":e.doPageSizeChange,"on-change":e.change}})],1)])],1)])},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(e){a("3WwB")},"data-v-35c5e0b1",null);t.default=o.exports}});
//# sourceMappingURL=27.866ab8e06bda9c15fa16.js.map