webpackJsonp([8],{BYZm:function(t,a,e){t.exports=e.p+"static/img/video.45d2ee1.jpg"},hV9K:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("BO1k"),s=e.n(i),o=e("P9l9"),r=e("iqGf"),n=e("BYZm"),l=e.n(n),d={components:{videoPlayer:r.videoPlayer},data:function(){return{videoImg:l.a,img:"",form:{houseId:"",videoIds:"",type:"1"},modal:!1,isEmpty:!0,param:{pageNum:1,pageSize:8,type:"",houseId:""},size:[8,16,32,40,48],total:0,page:1,rows:8,typeList:[{id:1,name:"AR"},{id:2,name:"普通视频"},{id:3,name:"Bim"}],imageList:[]}},methods:{play:function(t){var a={videoId:t,param:this.param};this.$router.push({name:"house_video_play",params:{id:this.$route.params.id,param:this.$route.params.param,video:a}})},handleRemoveImage:function(t){var a=this,e=this;e.$Modal.confirm({title:"确认删除该视频?",onOk:function(){var i={id:t};Object(o.O)(i).then(function(t){1e3===t.data.code?(e.$Message.success("删除成功！"),e.getImage(a.param)):e.$Message.error(t.data.message)})}})},add:function(){this.img="",this.form.videoIds="",this.modal=!0},handleUpload:function(t){var a=this,e=new FormData,i=!0,r=!1,n=void 0;try{for(var l,d=s()(t.target.files);!(i=(l=d.next()).done);i=!0){var m=l.value;e.append("video_file",m)}}catch(t){r=!0,n=t}finally{try{!i&&d.return&&d.return()}finally{if(r)throw n}}Object(o._10)(e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1e3===t.data.code?(a.img=t.data.content.url,a.form.videoIds=t.data.content.id):a.$Message.error(t.data.message),a.$refs.upload.value=""})},homeImageAdd:function(){var t=this;""!==this.form.videoIds?Object(o.N)(this.form).then(function(a){1e3===a.data.code?(t.getImage(t.param),t.modal=!1):t.$Message.error(a.data.message)}):this.$Message.error("视频不能为空")},back:function(){this.$router.push({name:"house",params:{param:this.$route.params.param}})},changeUser:function(t){this.getImage(this.param)},change:function(t){this.page=t,this.param.pageNum=this.page,this.getImage(this.param)},doPageSizeChange:function(t){this.rows=t,this.param.pageSize=this.rows,this.getImage(this.param)},getImage:function(t){var a=this;Object(o.P)(t).then(function(t){if(1e3===t.data.code){a.imageList=t.data.content.list,a.total=t.data.content.total;var e=a.imageList.length%4;if(0!==e)for(var i=0;i<4-e;i++)a.imageList.push({url:-1});0===a.total?a.isEmpty=!0:a.isEmpty=!1}else a.imageList=[],a.total=0,a.isEmpty=!0})}},mounted:function(){void 0!==this.$route.params.id&&(this.param.houseId=this.$route.params.id,this.form.houseId=this.$route.params.id,void 0!==this.$route.params.video&&(this.param=this.$route.params.video.param),this.getImage(this.param))}},m={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[i("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:t.back}}),t._v(" "),i("div",{staticStyle:{margin:"10px 30px"}},[i("span",[t._v("\n       房屋管理\n       "),i("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),i("span",[t._v("房屋视频")])])],1),t._v(" "),i("div",{staticClass:"detailBody"},[i("div",{staticClass:"detailContentImage"},[i("Row",[i("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-left":"20px"},attrs:{placeholder:"视频类型",clearable:"",transfer:!0},on:{"on-change":t.changeUser},model:{value:t.param.type,callback:function(a){t.$set(t.param,"type",a)},expression:"param.type"}},t._l(t.typeList,function(a){return i("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])}),1),t._v(" "),i("Button",{staticClass:"btn-save",staticStyle:{float:"right","margin-right":"20px"},on:{click:t.add}},[t._v("创建视频")])],1),t._v(" "),i("div",{staticClass:"content"},[t.isEmpty?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e(),t._v(" "),t._l(t.imageList,function(a,e){return t.isEmpty?t._e():i("div",{key:e,staticClass:"imageItem",style:{visibility:-1===a.url?"hidden":"visible"}},[i("div",{staticClass:"videoImg",staticStyle:{width:"370px",height:"220px"}},[i("img",{attrs:{src:t.videoImg,height:"220",width:"370"}})]),t._v(" "),i("div",{staticClass:"tip"},[i("Row",{staticClass:"tipInfo"},[i("div",{staticStyle:{float:"left"}},[t._v(t._s("1"===a.type||1===a.type?"AR":"2"===a.type||2===a.type?"普通视频":"3"===a.type||3===a.type?"Bim":""))])])],1),t._v(" "),i("div",{staticClass:"mask-image"},[i("Icon",{attrs:{type:"ios-trash-outline",size:"24",color:"#fff"},nativeOn:{click:function(e){return t.handleRemoveImage(a.id)}}})],1),t._v(" "),i("div",{staticClass:"tipPlay"},[i("Icon",{attrs:{type:"md-play",color:"#fff",size:"60"},on:{click:function(e){return t.play(a)}}})],1)])})],2),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("Page",{ref:"tablePage",attrs:{total:t.total,"page-size":t.rows,"show-sizer":"","show-total":"","page-size-opts":t.size,"show-elevator":"",transfer:!0},on:{"on-page-size-change":t.doPageSizeChange,"on-change":t.change}})],1)],1),t._v(" "),i("Modal",{attrs:{width:"600"},model:{value:t.modal,callback:function(a){t.modal=a},expression:"modal"}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v("创建视频\n      ")]),t._v(" "),i("div",{staticClass:"formContent"},[i("Form",{ref:"formItem",staticStyle:{"text-align":"left"},attrs:{model:t.form,"label-width":100}},[i("FormItem",{staticClass:"selfValidate",attrs:{label:"类型"}},[i("RadioGroup",{model:{value:t.form.type,callback:function(a){t.$set(t.form,"type",a)},expression:"form.type"}},[i("Radio",{attrs:{label:"1"}},[t._v("AR")]),t._v(" "),i("Radio",{attrs:{label:"2"}},[t._v("普通视频")]),t._v(" "),i("Radio",{attrs:{label:"3"}},[t._v("Bim")])],1)],1),t._v(" "),i("FormItem",{staticClass:"selfValidate",attrs:{label:"视频"}},[i("div",{staticClass:"file"},[i("input",{ref:"upload",staticStyle:{height:"30px"},attrs:{type:"file"},on:{change:t.handleUpload}}),t._v("上传视频\n            ")]),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:""!==t.img,expression:"img !== ''"}]},[i("Col",{attrs:{span:"24"}},[i("img",{attrs:{src:e("BYZm"),height:"220",width:"370"}})])],1)],1)],1)],1),t._v(" "),i("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.homeImageAdd}},[t._v("创建视频")])],1)])],1)],1)},staticRenderFns:[]};var c=e("VU/8")(d,m,!1,function(t){e("te0L")},"data-v-6649a210",null);a.default=c.exports},te0L:function(t,a){}});
//# sourceMappingURL=8.b6c9e357d180baf71349.js.map