webpackJsonp([22],{"/oiD":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("P9l9"),s={data:function(){return{idCardNotice:!1,mobilePhoneNotice:!1,map:null,detailAddress:"",typeList:[],formItem:{houseName:"",area:1,type:"0",lease:"0",form:"1",useState:"3",owner:"",ownerIdCard:"",lng:"",lat:"",street:"",pixelX:null,pixelY:null,explains:""}}},methods:{idCardVal:function(t){this.formItem.tenantIdCard=t.trim();""!==this.formItem.tenantIdCard?/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t.trim())?this.idCardNotice=!1:this.idCardNotice=!0:this.idCardNotice=!1},leaseChange:function(){"0"===this.formItem.lease?this.formItem.useState="3":this.formItem.useState="0"},mobilePhoneVal:function(t){this.formItem.phone=t.trim();""!==this.formItem.phone?/(^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$)/.test(t.trim())?this.mobilePhoneNotice=!1:this.mobilePhoneNotice=!0:this.mobilePhoneNotice=!1},loadMap:function(){var t=this,e=new BMap.Map("container",{enableMapClick:!1});t.map=e;var a=new BMap.Point(116.404,39.915);e.centerAndZoom(a,18),e.enableScrollWheelZoom(),new BMap.Autocomplete({input:"searchInput",location:e}).addEventListener("onconfirm",function(e){var a=e.item.value;t.formItem.street=a.province+a.city+a.district+a.street+a.business,t.setPlace()}),t.map.addEventListener("onclick",function(e){t.formItem.lng=e.point.lng,t.formItem.lat=e.point.lat,(new BMap.Geocoder).getLocation(e.point,function(e){var a=e.addressComponents;t.formItem.street=a.province+a.city+a.district+a.street+a.streetNumber})})},setPlace:function(){var t=this;t.map.clearOverlays();var e=new BMap.LocalSearch(t.map,{onSearchComplete:function(){var a=e.getResults().getPoi(0).point;t.formItem.lng=a.lng,t.formItem.lat=a.lat,t.map.centerAndZoom(a,18),t.map.addOverlay(new BMap.Marker(a))}});e.search(this.detailAddress)},submitVal:function(t){return 0===t.houseName.toString().trim().length?(this.$Message.error("房屋名称不能为空！"),!1):!0!==this.idCardNotice||(this.$Message.error("身份证格式不合法！"),!1)},save:function(){var t=this;this.submitVal(this.formItem)&&(""===this.formItem.id||void 0===this.formItem.id?Object(r.F)(this.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("房屋创建成功！"),t.back()):t.$Message.error(e.data.message)}):Object(r.M)(this.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("房屋编辑成功！"),t.back()):t.$Message.error(e.data.message)}))},getDetail:function(t){var e=this,a={houseId:t};Object(r.H)(a).then(function(t){if(1e3===t.data.code){var a=t.data.content;e.formItem={id:a.id,houseName:a.houseName,area:a.area,type:a.type+"",lease:a.lease+"",form:a.form+"",useState:a.useState+"",owner:a.owner,ownerIdCard:a.ownerIdCard,lng:a.lng,lat:a.lat,street:a.street,pixelX:a.pixelX,pixelY:a.pixelY,explains:a.explains}}else e.formItem={id:e.$route.params.id,houseName:"",area:1,type:"0",lease:"0",form:"1",useState:"3",owner:"",ownerIdCard:"",lng:"",lat:"",street:"",pixelX:null,pixelY:null,explains:""}})},back:function(){""===this.formItem.id?this.$router.push({name:"house"}):this.$router.push({name:"house",params:{param:this.$route.params.param}})}},mounted:function(){this.loadMap()},created:function(){void 0!==this.$route.params.id&&(this.formItem.id=this.$route.params.id,this.getDetail(this.formItem.id))}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[a("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:t.back}}),t._v(" "),a("div",{staticStyle:{margin:"10px 30px"}},[a("span",[t._v("\n       房屋管理\n       "),a("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),a("span",[t._v(t._s(""===t.formItem.id||void 0===t.formItem.id?"创建":"编辑")+"房屋")])])],1),t._v(" "),a("div",{staticClass:"detailBody"},[a("div",{staticClass:"detailContent"},[a("Row",{staticClass:"detailTitle",attrs:{type:"flex",justify:"start"}},[t._v("房屋信息")]),t._v(" "),a("div",{staticClass:"formContent"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":150}},[a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"房屋名称"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入房屋名称"},model:{value:t.formItem.houseName,callback:function(e){t.$set(t.formItem,"houseName",e)},expression:"formItem.houseName"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"房屋类型"}},[a("RadioGroup",{staticStyle:{float:"left"},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"0"}},[t._v("重要房屋")]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"1"}},[t._v("一般房屋")])],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"是否租赁"}},[a("RadioGroup",{staticStyle:{float:"left"},on:{"on-change":t.leaseChange},model:{value:t.formItem.lease,callback:function(e){t.$set(t.formItem,"lease",e)},expression:"formItem.lease"}},[a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"0"}},[t._v("否")]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"1"}},[t._v("全部出租")]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"2"}},[t._v("部分出租")])],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"房屋类别"}},[a("RadioGroup",{staticStyle:{float:"left"},model:{value:t.formItem.form,callback:function(e){t.$set(t.formItem,"form",e)},expression:"formItem.form"}},[a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"1"}},[t._v("公有")]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"2"}},[t._v("私有")]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"3"}},[t._v("代管")])],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"使用状态"}},[a("RadioGroup",{staticStyle:{float:"left"},model:{value:t.formItem.useState,callback:function(e){t.$set(t.formItem,"useState",e)},expression:"formItem.useState"}},[a("Radio",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.formItem.lease,expression:"formItem.lease !== '0'"}],staticStyle:{"margin-right":"20px"},attrs:{label:"0"}},[t._v("待出租")]),t._v(" "),a("Radio",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.formItem.lease,expression:"formItem.lease !== '0'"}],staticStyle:{"margin-right":"20px"},attrs:{label:"1"}},[t._v("部分出租中")]),t._v(" "),a("Radio",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.formItem.lease,expression:"formItem.lease !== '0'"}],staticStyle:{"margin-right":"20px"},attrs:{label:"2"}},[t._v("全部出租中")]),t._v(" "),a("Radio",{directives:[{name:"show",rawName:"v-show",value:"0"===t.formItem.lease,expression:"formItem.lease === '0'"}],staticStyle:{"margin-right":"20px"},attrs:{label:"3"}},[t._v("自用")]),t._v(" "),a("Radio",{directives:[{name:"show",rawName:"v-show",value:"0"===t.formItem.lease,expression:"formItem.lease === '0'"}],staticStyle:{"margin-right":"20px"},attrs:{label:"4"}},[t._v("空闲")])],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"房屋面积"}},[a("InputNumber",{staticStyle:{width:"300px",float:"left","margin-right":"5px"},attrs:{formatter:function(t){return(""+t).replace(/\d+\.\d{2,}/g,(""+t).substr(0,(""+t).indexOf(".")+3))},parser:function(t){return t.replace("-","")},min:1,max:99999999},model:{value:t.formItem.area,callback:function(e){t.$set(t.formItem,"area",e)},expression:"formItem.area"}}),t._v("㎡\n            ")],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"详细地址"}},[""===t.formItem.street?a("span",{staticClass:"noticeTextGray"},[t._v("请在地图上点击选择地址或输入框搜索地址")]):t._e(),t._v("\n              "+t._s(t.formItem.street)+"\n            ")])],1),t._v(" "),a("Row",{staticStyle:{height:"430px"},attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{span:"15"}},[a("FormItem",[a("div",{attrs:{id:"outer-box"}},[a("div",{attrs:{id:"container",tabindex:"0"}}),t._v(" "),a("div",{attrs:{id:"panel"}},[a("input",{attrs:{id:"searchInput",placeholder:"输入关键字搜索地址"}}),t._v(" "),a("div",{attrs:{id:"searchResults"}})])])])],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"房屋经度"}},[a("Input",{staticStyle:{width:"300px",float:"left"},model:{value:t.formItem.lng,callback:function(e){t.$set(t.formItem,"lng",e)},expression:"formItem.lng"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"房屋纬度"}},[a("Input",{staticStyle:{width:"300px",float:"left"},model:{value:t.formItem.lat,callback:function(e){t.$set(t.formItem,"lat",e)},expression:"formItem.lat"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"实景图中像素位置X"}},[a("InputNumber",{staticStyle:{width:"300px",float:"left"},model:{value:t.formItem.pixelX,callback:function(e){t.$set(t.formItem,"pixelX",e)},expression:"formItem.pixelX"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"实景图中像素位置Y"}},[a("InputNumber",{staticStyle:{width:"300px",float:"left"},model:{value:t.formItem.pixelY,callback:function(e){t.$set(t.formItem,"pixelY",e)},expression:"formItem.pixelY"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"房屋所有人姓名"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入房屋所有人姓名"},model:{value:t.formItem.owner,callback:function(e){t.$set(t.formItem,"owner",e)},expression:"formItem.owner"}})],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{attrs:{label:"房屋所有人身份证号"}},[a("Input",{staticStyle:{width:"300px",float:"left"},attrs:{placeholder:"请输入房屋所有人身份证号"},on:{"on-change":function(e){return t.idCardVal(t.formItem.ownerIdCard)}},model:{value:t.formItem.ownerIdCard,callback:function(e){t.$set(t.formItem,"ownerIdCard",e)},expression:"formItem.ownerIdCard"}}),t._v(" "),t.idCardNotice?a("span",{staticClass:"notice"},[t._v("请输入合法的二代身份证号码")]):t._e()],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"房屋说明"}},[a("Input",{staticStyle:{width:"100%"},attrs:{maxlength:"100","show-word-limit":"",type:"textarea",placeholder:"请输入房间说明",autosize:{minRows:2,maxRows:5}},model:{value:t.formItem.explains,callback:function(e){t.$set(t.formItem,"explains",e)},expression:"formItem.explains"}}),a("br")],1)],1)],1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex"}},[a("Button",{staticClass:"btn-save",staticStyle:{padding:"5px 30px"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(t){a("K2xT")},"data-v-4b39d578",null);e.default=i.exports},K2xT:function(t,e){}});
//# sourceMappingURL=22.89fcead8df3631b29b0a.js.map