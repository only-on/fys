webpackJsonp([26],{vQke:function(t,e){},wO2p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("P9l9"),r={data:function(){return{typeId:"",typeList:[],typeName:"",formItem:{id:"",isMaintain:"1",advanceDay:null,warningMode:"0",cycle:null}}},methods:{getTypeList:function(){var t=this;Object(s._8)().then(function(e){1e3===e.data.code?t.typeList=e.data.content:t.typeList=[]})},changeMaintain:function(){this.formItem.advanceDay=null,this.formItem.cycle=null,this.formItem.warningMode="0"},submitVal:function(t){return null===t.advanceDay?(this.$Message.error("提前预警天数不能为空！"),!1):null===t.cycle?(this.$Message.error("维护周期不能为空！"),!1):!(t.advanceDay>=t.cycle)||(this.$Message.error("提前预警天数必须小于维护周期！"),!1)},save:function(){var t=this;("0"===this.formItem.isMaintain||this.submitVal(this.formItem))&&(this.formItem.id=this.typeId,void 0===this.$route.params.row?Object(s.A)(this.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("预警规则创建成功！"),t.$router.push({name:"warn"})):t.$Message.error(e.data.message)}):Object(s.E)(this.formItem).then(function(e){1e3===e.data.code?(t.$Message.success("预警规则编辑成功！"),t.$router.push({name:"warn",params:{param:t.$route.params.param}})):t.$Message.error(e.data.message)}))},getDetail:function(t){var e=this,a={fixedTypeId:t};Object(s.C)(a).then(function(t){if(1e3===t.data.code){var a=t.data.content;e.formItem={id:a.id,isMaintain:a.isMaintain+"",advanceDay:a.advanceDay,warningMode:a.warningMode+"",cycle:a.cycle},e.typeName=a.typeName}else e.formItem={id:e.$route.params.id,isMaintain:"1",advanceDay:null,warningMode:"0",cycle:null}})},back:function(){this.$router.push({name:"warn",params:{param:this.$route.params.param}})}},created:function(){this.getTypeList(),void 0!==this.$route.params.row&&(this.formItem.id=this.$route.params.row.typeId,this.typeId=this.formItem.id,this.getDetail(this.formItem.id))}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"titleBar",attrs:{type:"flex",justify:"start"}},[a("Icon",{staticClass:"closeIcon",attrs:{type:"md-close",size:"30"},on:{click:t.back}}),t._v(" "),a("div",{staticStyle:{margin:"10px 30px"}},[a("span",[t._v("\n       固定资产预警管理\n       "),a("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}})],1),t._v(" "),a("span",[t._v(t._s(""===t.formItem.id?"创建":"编辑")+"预警规则")])])],1),t._v(" "),a("div",{staticClass:"detailBody"},[a("div",{staticClass:"detailContent"},[a("Row",{staticClass:"detailTitle",attrs:{type:"flex",justify:"start"}},[t._v("规则信息")]),t._v(" "),a("div",{staticClass:"formContent"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":150}},[a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"资产分类"}},[void 0!==t.$route.params.row?a("span",[t._v(" "+t._s(t.typeName))]):a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择资产分类",clearable:""},model:{value:t.typeId,callback:function(e){t.typeId=e},expression:"typeId"}},t._l(t.typeList,function(e){return a("Option",{key:e.typeId,attrs:{value:e.typeId}},[t._v(t._s(e.typeName))])}),1)],1)],1),t._v(" "),a("Row",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.$route.params.row,expression:"$route.params.row !== undefined"}],attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"定期维护"}},[a("RadioGroup",{on:{"on-change":t.changeMaintain},model:{value:t.formItem.isMaintain,callback:function(e){t.$set(t.formItem,"isMaintain",e)},expression:"formItem.isMaintain"}},[a("Radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formItem.isMaintain,expression:"formItem.isMaintain === '1'"}]},[a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"告警方式"}},[a("RadioGroup",{model:{value:t.formItem.warningMode,callback:function(e){t.$set(t.formItem,"warningMode",e)},expression:"formItem.warningMode"}},[a("Radio",{attrs:{label:"0"}},[t._v("手机短信")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("消息推送")])],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"提前预警天数"}},[a("InputNumber",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{formatter:function(t){return(""+t).replace(".","")},parser:function(t){return t.replace("-","")}},model:{value:t.formItem.advanceDay,callback:function(e){t.$set(t.formItem,"advanceDay",e)},expression:"formItem.advanceDay"}}),t._v("\n                天\n              ")],1)],1),t._v(" "),a("Row",{attrs:{type:"flex"}},[a("FormItem",{staticClass:"selfValidate",attrs:{label:"维护周期"}},[a("InputNumber",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{formatter:function(t){return(""+t).replace(".","")},parser:function(t){return t.replace("-","")}},model:{value:t.formItem.cycle,callback:function(e){t.$set(t.formItem,"cycle",e)},expression:"formItem.cycle"}}),t._v("\n                天\n              ")],1)],1)],1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex"}},[a("Button",{staticClass:"btn-save",staticStyle:{padding:"5px 30px"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(t){a("vQke")},"data-v-3a068fda",null);e.default=n.exports}});
//# sourceMappingURL=26.be6a7e16587b7c37f61f.js.map