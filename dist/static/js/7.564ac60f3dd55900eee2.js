webpackJsonp([7],{"1wEL":function(e,t){},"9Jnk":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("pPmT"),i=a("P9l9"),r={data:function(){var e=this;return{size:[10,50,100,200],total:0,rows:10,page:1,typeList:[],fixedList:[],paramnter:{pageNum:1,pageSize:10,keyword:"",fixedType:"",fixedId:"",startTime:"",endTime:""},columns:[{title:"序号",width:100,align:"center",render:function(t,a){return t("div",e.paramnter.pageNum>1?(e.page-1)*e.rows+a.index+1:a.index+1)}},{title:"分类名称",key:"fixedTypeName",align:"center"},{title:"资产名称",key:"fiexedName",align:"center"},{title:"维护类型",key:"type",align:"center",render:function(e,t){return e("div",1===t.row.type?"损坏维修":"维护保养")}},{title:"维护人",key:"repairer",align:"center"},{title:"手机号码",key:"phone",align:"center"},{title:"维护时间",key:"repairTime",align:"center"},{title:"操作",align:"center",width:260,render:function(t,a){return t("div",[t("Icon",{props:{type:"ios-create-outline",size:28},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.$router.push({name:"record_create",params:{param:e.paramnter,id:a.row.id}})}}}),t("Icon",{props:{type:"ios-list-box-outline",size:24},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.$router.push({name:"record_detail",params:{param:e.paramnter,id:a.row.id}})}}}),t("Icon",{props:{type:"ios-trash-outline",size:24},style:{color:"#516BEB",cursor:"pointer",marginRight:"8px"},on:{click:function(){e.delItem(a.row.id)}}})])}}],dataTable:[]}},methods:{getTypeList:function(){var e=this;Object(i.y)().then(function(t){1e3===t.data.code?e.typeList=t.data.content:e.typeList=[]})},changeType:function(e){this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter),this.getFixed(e)},getFixed:function(e){var t=this,a={typeId:e};Object(i.n)(a).then(function(e){1e3===e.data.code?t.fixedList=e.data.content:t.fixedList=[]})},add:function(){this.$router.push({name:"record_create"})},delItem:function(e){var t=this;t.$Modal.confirm({title:"确认删除该资产维护记录?",onOk:function(){var a={repairId:e};Object(i.p)(a).then(function(e){1e3===e.data.code?(t.$Message.success("删除成功！"),t.getTableDatas(t.paramnter)):t.$Message.error(e.data.message)})}})},changeDate:function(e){""!==e[0]&&void 0!==e[1]?(this.paramnter.startTime=e[0],this.paramnter.endTime=e[1]):(this.paramnter.startTime=void 0,this.paramnter.endTime=void 0),this.paramnter.pageNum=1,this.page=1;this.getTableDatas(this.paramnter)},keywordChange:Object(n.a)(function(){this.paramnter.keyword=this.paramnter.keyword.trim(),this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)}),backKeyword:function(){this.paramnter.keyword="",this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},changeSelect:function(){this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},change:function(e){this.page=e,this.paramnter.pageNum=this.page,this.getTableDatas(this.paramnter)},doPageSizeChange:function(e){this.rows=e,this.paramnter.pageSize=this.rows,this.getTableDatas(this.paramnter)},getTableDatas:function(e){var t=this;Object(i.r)(e).then(function(e){1e3===e.data.code?(t.dataTable=e.data.content.list,t.total=e.data.content.total,t.rows=e.data.content.pageSize,t.page=e.data.content.pageNum):(t.dataTable=[],t.total=0,t.rows=10,t.page=1),void 0!==t.$refs.tablePage&&(t.$refs.tablePage.currentPage=t.page)})}},created:function(){this.isManager="4"!==sessionStorage.getItem("roleType"),this.isManager||this.columns.splice(this.columns.length-1,1),void 0!==this.$route.params.param&&(this.paramnter=this.$route.params.param),this.getTypeList(),this.getFixed(),this.getTableDatas(this.paramnter)}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"content"},[a("Row",{staticStyle:{"margin-bottom":"20px"}},[a("Input",{staticClass:"head-search",staticStyle:{width:"250px",float:"left","margin-right":"20px"},attrs:{placeholder:"维护人、手机号码",icon:"ios-close-circle"},on:{"on-change":e.keywordChange,"on-click":e.backKeyword},model:{value:e.paramnter.keyword,callback:function(t){e.$set(e.paramnter,"keyword",t)},expression:"paramnter.keyword"}}),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"资产分类",clearable:""},on:{"on-change":e.changeType},model:{value:e.paramnter.fixedType,callback:function(t){e.$set(e.paramnter,"fixedType",t)},expression:"paramnter.fixedType"}},e._l(e.typeList,function(t){return a("Option",{key:t.typeId,attrs:{value:t.typeId}},[e._v(e._s(t.typeName))])}),1),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"固定资产",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.paramnter.fixedId,callback:function(t){e.$set(e.paramnter,"fixedId",t)},expression:"paramnter.fixedId"}},e._l(e.fixedList,function(t){return a("Option",{key:t.fixedId,attrs:{value:t.fixedId}},[e._v(e._s(t.fixedName))])}),1),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"维护类型",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.paramnter.type,callback:function(t){e.$set(e.paramnter,"type",t)},expression:"paramnter.type"}},[a("Option",{attrs:{value:"2"}},[e._v("维护保养")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("损坏维修")])],1),e._v(" "),a("DatePicker",{staticStyle:{float:"left",width:"300px"},attrs:{type:"datetimerange",placeholder:"维护时间",editable:!1},on:{"on-change":e.changeDate}}),e._v(" "),a("Button",{staticClass:"btn-save",staticStyle:{float:"right"},on:{click:e.add}},[e._v("创建维护记录")])],1),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns,data:e.dataTable}}),e._v(" "),a("div",{staticClass:"pages-block"},[a("div",{staticClass:"pages-right"},[a("Page",{ref:"tablePage",attrs:{total:e.total,"page-size":e.rows,"show-sizer":"","show-total":"","page-size-opts":e.size,"show-elevator":"",transfer:!0},on:{"on-page-size-change":e.doPageSizeChange,"on-change":e.change}})],1)])],1)])},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(e){a("1wEL")},"data-v-047c0775",null).exports,c={data:function(){var e=this;return{size:[10,50,100,200],total:0,rows:10,page:1,typeList:[],fixedList:[],paramnter:{pageNum:1,pageSize:10,keyword:"",fixedType:"",fixedId:"",nextDays:""},columns:[{title:"序号",width:100,align:"center",render:function(t,a){return t("div",e.paramnter.pageNum>1?(e.page-1)*e.rows+a.index+1:a.index+1)}},{title:"分类名称",key:"fixedTypeName",align:"center"},{title:"资产名称",key:"fixedName",align:"center"},{title:"监管人",key:"supervisor",align:"center"},{title:"手机号码",key:"phone",align:"center"},{title:"上次维护时间",key:"lastTime",align:"center",render:function(e,t){return e("div",t.row.lastTime.substr(0,10))}},{title:"下次维护时间",key:"nextTime",align:"center",render:function(e,t){return e("div",t.row.nextTime.substr(0,10))}}],dataTable:[]}},methods:{getTypeList:function(){var e=this;Object(i.y)().then(function(t){1e3===t.data.code?e.typeList=t.data.content:e.typeList=[]})},changeType:function(e){this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter),this.getFixed(e)},getFixed:function(e){var t=this,a={typeId:e};Object(i.n)(a).then(function(e){1e3===e.data.code?t.fixedList=e.data.content:t.fixedList=[]})},changeDate:function(e){this.paramnter.nextDays=""!==e&&void 0!==e?e+" 00:00:00":"",this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},keywordChange:Object(n.a)(function(){this.paramnter.keyword=this.paramnter.keyword.trim(),this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)}),backKeyword:function(){this.paramnter.keyword="",this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},changeSelect:function(){this.page=1,this.paramnter.pageNum=1,this.getTableDatas(this.paramnter)},change:function(e){this.page=e,this.paramnter.pageNum=this.page,this.getTableDatas(this.paramnter)},doPageSizeChange:function(e){this.rows=e,this.paramnter.pageSize=this.rows,this.getTableDatas(this.paramnter)},getTableDatas:function(e){var t=this;Object(i._2)(e).then(function(e){1e3===e.data.code?(t.dataTable=e.data.content.list,t.total=e.data.content.total,t.rows=e.data.content.pageSize,t.page=e.data.content.pageNum):(t.dataTable=[],t.total=0,t.rows=10,t.page=1),void 0!==t.$refs.tablePage&&(t.$refs.tablePage.currentPage=t.page)})}},created:function(){this.getTypeList(),this.getFixed(),this.getTableDatas(this.paramnter)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"content"},[a("Row",{staticStyle:{"margin-bottom":"20px"}},[a("Input",{staticClass:"head-search",staticStyle:{width:"250px",float:"left","margin-right":"20px"},attrs:{placeholder:"监管人、手机号码",icon:"ios-close-circle"},on:{"on-change":e.keywordChange,"on-click":e.backKeyword},model:{value:e.paramnter.keyword,callback:function(t){e.$set(e.paramnter,"keyword",t)},expression:"paramnter.keyword"}}),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"资产分类",clearable:""},on:{"on-change":e.changeType},model:{value:e.paramnter.fixedType,callback:function(t){e.$set(e.paramnter,"fixedType",t)},expression:"paramnter.fixedType"}},e._l(e.typeList,function(t){return a("Option",{key:t.typeId,attrs:{value:t.typeId}},[e._v(e._s(t.typeName))])}),1),e._v(" "),a("Select",{staticClass:"head-search",staticStyle:{width:"200px",float:"left","margin-right":"20px"},attrs:{placeholder:"固定资产",clearable:""},on:{"on-change":e.changeSelect},model:{value:e.paramnter.fixedId,callback:function(t){e.$set(e.paramnter,"fixedId",t)},expression:"paramnter.fixedId"}},e._l(e.fixedList,function(t){return a("Option",{key:t.fixedId,attrs:{value:t.fixedId}},[e._v(e._s(t.fixedName))])}),1),e._v(" "),a("DatePicker",{staticStyle:{float:"left",width:"300px"},attrs:{type:"date",placeholder:"维护时间",editable:!1,transfer:!0},on:{"on-change":e.changeDate}})],1),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns,data:e.dataTable}}),e._v(" "),a("div",{staticClass:"pages-block"},[a("div",{staticClass:"pages-right"},[a("Page",{ref:"tablePage",attrs:{total:e.total,"page-size":e.rows,"show-sizer":"","show-total":"","page-size-opts":e.size,"show-elevator":"",transfer:!0},on:{"on-page-size-change":e.doPageSizeChange,"on-change":e.change}})],1)])],1)])},staticRenderFns:[]};var p={components:{assetsMain:o,warnList:a("VU/8")(c,l,!1,function(e){a("QXAQ")},"data-v-61be82de",null).exports},data:function(){return{}}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"body"},[t("Tabs",{attrs:{value:"name1",animated:!1}},[t("TabPane",{attrs:{label:"维护记录管理",name:"name1"}},[t("assetsMain")],1),this._v(" "),t("TabPane",{attrs:{label:"维护提醒列表",name:"name2"}},[t("warnList")],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,d,!1,function(e){a("euf9")},"data-v-34a284d8",null);t.default=h.exports},QXAQ:function(e,t){},euf9:function(e,t){}});
//# sourceMappingURL=7.564ac60f3dd55900eee2.js.map